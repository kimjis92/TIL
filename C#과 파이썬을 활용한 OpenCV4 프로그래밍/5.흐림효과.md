# 5.흐림효과

#### 블러링을 하는 이유

1.노이즈를 제거해 계산을 빠르고 정확하게 하는데 도움을 줌

2.이미지의 해상도를 변경하는 경우 데이터를 생성하거나 줄여야할때, 즉 샘플링 이미지를 재구성할 때 사용된다.

#### 블러링의 세 가지 중요 매개변수  

![image-20200406045328391](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406045328391.png)

1. 커널 : 위 그림에서 박스 필터라고도 불림
2. 고정점 : 위 그림에서 빨간색부분



위의 컨볼루션 계산을 통해 새로운 픽셀값이 나오게 되고 위 박싱에 있는 수의 종류에 따라 블러링의 종류가 다르다 일반적으로 홀수의 값을 갖는 크기를 활용 ex) 3x3, 5x5, 7x7



3. 테두리 외삽법 : 가장자리 픽셀은 계산이 불가능 하므로 이 부분을 어떻게 처리할건지의 방식

```python
#단순흐림효과 : 모든 픽셀의 단순 평균을 구함
import cv2
land=cv2.imread('land.png')
dst=cv2.blur(land, (3, 3))
dst2=cv2.blur(land, (7, 7), anchor=None, borderType=None)
cv2.imshow('dst', dst)
cv2.imshow('dst2', dst2)
cv2.waitKey(0)
cv2.destroyAllWindows()
```



anchor은 위의 빨간색 점의 위치를 말하는것이고 None이면 -1, -1 즉 커널의 중앙이다

borderType는 테두리 외삽법을 어떤 방법으로 적용할건지를 말함



![image-20200406050849841](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406050849841.png)

위 사진은 3x3 커널



![image-20200406050915875](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406050915875.png)



위 사진은 7x7 커널





```python
#박스 필터 흐림효과 : 가운데 -1은 정밀도를 나타내줌 -1은 입력이미지와 동일
dst=cv2.boxFilter(land, -1, (7, 7))
dst2=cv2.boxFilter(land, -1, (7, 7), normalize=True)
cv2.imshow('dst', dst)
cv2.imshow('dst2', dst2)
cv2.waitKey(0)
cv2.destroyAllWindows()
```



![image-20200406052031252](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406052031252.png)

위는 정규화 적용 x



![image-20200406052152518](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406052152518.png)



위는 정규화적용



![](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406054606392.png)





```python
#중간값 흐림 효과 : 중심픽셀 주변으로 이웃한 픽셀들의 중간값으로 모두 대체, 커널사이즈 홀수만 가능
dst=cv2.medianBlur(land, 7)
cv2.imshow('dst', dst)
cv2.waitKey(0)
cv2.destroyAllWindows()
```


![image-20200406052910480](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406052910480.png)



```python
#가우시안 흐림 효과 : 흐림 효과 함수중 가장 유용한 함수 3번째 아규먼트는 sigmaX, 특히 3x3 5x5 7x7 크기 커널에대해 우수한 성능을 보여줌
dst=cv2.GaussianBlur(land, (7,7), 0)
cv2.imshow('dst', dst)
cv2.waitKey(0)
cv2.destroyAllWindows()
```



가우시안 블러 

![image-20200406053925956](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406053925956.png)



가우시안블러 결과



![image-20200406055542253](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406055542253.png)







```python
#양방향 필터 흐림효과 : 가장자리를 선명하게 보존하면서 노이즈를 우수하게 제거하는 흐림 효과함수 
#두번째 아규먼트가 지름인데 크면 클수록 수채화처럼 변형되며 처리속도가 느려진다
dst=cv2.bilateralFilter(land, 50, 33, 11)
cv2.imshow('dst', dst)
cv2.waitKey(0)
cv2.destroyAllWindows()
```



![image-20200406055608291](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406055608291.png)







# 이미지 변환

이미지 변환 또한 이미지 변형과 동이랗게 전처리과정으로 주로 활용되며 이미지 변형과는 다르게 데이터의 수가 감소하지는 않지만 이미지 해석을 위해 더 검출하기 쉬운 데이터로 만드는 과정

간단히 표현하자면 좌표(x, y)를 좌표(w,u)로 바꾸는 과정



변환의 종류는 이미지 크기 변환,  특징 요소의 위치 변경, 이미지의 회전등이 있음



1. 강체 변환:  평행 이동과 회전만 허용하는 변환
2. 유사 변환:  평행 이동 회전변환과 크기변환까지 허용하는 변환
3. 선형 변환:  크기 변환, 반사, 기울임이 허용되는 변환
4. 아핀 변환:  선형 변환에 이동변환까지 포함, 특이한 점은 선의 수평성 유지 및 길이의 비와 평행성이 보존됨
5. 원근 변환:  원근감을 표현하기 위한 변환으로 아핀 변환과 유사하지만 수평성이 유지되지 않음



## 1.확대&축소

이미지 확대 축소는 단계별로 있으며 이를 이미지 피라미드라고 부름

![image-20200406070416659](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406070416659.png)

#### 가우시안 피라미드

업샘플링: 입력 이미지 M x N 크기의 이미지를 2M x 2N의 크기를 갖게하며 2배씩 늘려나감



다운샘플링: 입력 이미지 M x N 크기의 이미지를 M/2 x N/2의 크기를 갖게하며 2배씩 줄여나감



**주의할점은 다운샘플링하면 일부 데이터를 제거하는것이므로 다운샘플링후 업샘플링을 해도 원본이미지와 같지 않다**



#### 라플라시안 피라미드

다음단계의 이미지를 만들기 위해 다운샘플링한 이미지를 만들고 다운샘플링한 이미지를 업샘플링하고 그 이미지와 원본이미지의 차이를 구하는것

![image-20200406071324474](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406071324474.png)



```python
#이미지 확대(Pyramid Up) 2번째 아규먼트는 출력 이미지 크기
dst=cv2.pyrUp(land)
cv2.imshow('dst', dst)
cv2.waitKey(0)
cv2.destroyAllWindows()
```



![image-20200406071532407](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406071532407.png)



```python
#이미지 축소(PYramid Down) 2번재 아규먼트는 출력 이미지 크기
dst=cv2.pyrDown(land)
cv2.imshow('dst', dst)
cv2.waitKey(0)
cv2.destroyAllWindows()
```





![image-20200406071936931](C:\Users\Admin\AppData\Roaming\Typora\typora-user-images\image-20200406071936931.png)







##  2.이미지 크기 조절

사용자가 원하는 크기로 이미지를 조절하는 방법



```python
#파이썬의 opencv 이미지 크기 조절함수
dst=cv2.resize(
	src,
	dsize,
	fx = None
	fy = None
	interpolation)
```



interpolation은 보간법으로 이미지를 늘리거나 줄일 때 새롭게 할당해야 할 부분인 실수 좌표에 있는 픽셀에 어떤 방식으로 매핑할걸지를 결정





## 3.대칭 & 회전

원본이미지에 대칭 회전변환을 해줌



```python
#파이썬 opencv 대칭함수
dst = cv2.flip(
	src,
	flipCode
)
```





